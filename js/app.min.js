function dataChart(e,t,n){var i=e,a=t,s="100%",r=27,o=d3.scale.linear().domain([0,d3.max(i)]).range([0,s]),c=d3.select(a).attr("width",s).attr("height",r*i.length),l=c.selectAll("g").data(i).enter().append("g").attr("transform",function(e,t){return"translate(0,"+t*r+")"});l.append("rect").attr("width",o).attr("height",r-1),l.append("text").attr("x","0.25rem").attr("y",r/2).attr("dy",".35em").text(function(e,t){return n[t]})}function resultApi(e){$(".app-content").load("templates/results.html"),$.getJSON(e).then(function(e){function t(t){var n=e[0][t].replace(/\,/g,""),i=e[1][t].replace(/\,/g,""),a=e[2][t].replace(/\,/g,"");return[parseInt(n,10),parseInt(i,10),parseInt(a,10)]}function n(){var t=e[0].living.housePrice.replace(/\,/g,""),n=e[1].living.housePrice.replace(/\,/g,""),i=e[2].living.housePrice.replace(/\,/g,"");return[parseInt(t,10),parseInt(n,10),parseInt(i,10)]}function i(){var t=e[0].living.flatPrice.replace(/\,/g,""),n=e[1].living.flatPrice.replace(/\,/g,""),i=e[2].living.flatPrice.replace(/\,/g,"");return[parseInt(t,10),parseInt(n,10),parseInt(i,10)]}function a(){var t=e[0].living.houseRent.replace(/\,/g,""),n=e[1].living.houseRent.replace(/\,/g,""),i=e[2].living.houseRent.replace(/\,/g,"");return[parseInt(t,10),parseInt(n,10),parseInt(i,10)]}function s(){var t=e[0].living.flatRent.replace(/\,/g,""),n=e[1].living.flatRent.replace(/\,/g,""),i=e[2].living.flatRent.replace(/\,/g,"");return[parseInt(t,10),parseInt(n,10),parseInt(i,10)]}function r(){var t=e[0].food.totalFoodCost.replace(/\,/g,""),n=e[1].food.totalFoodCost.replace(/\,/g,""),i=e[2].food.totalFoodCost.replace(/\,/g,"");return[parseInt(t,10),parseInt(n,10),parseInt(i,10)]}function o(t){var n=e[0].dateNight[t].replace(/\./g,""),i=e[1].dateNight[t].replace(/\./g,""),a=e[2].dateNight[t].replace(/\./g,"");return[parseInt(n,10),parseInt(i,10),parseInt(a,10)]}console.log(e);var c=[e[0].cityName,e[1].cityName,e[2].cityName],l=t("monthlyEarnings");dataChart(l,".earnings-chart__monthly",c),dataChart(l,".earnings-chart__yearly",c),dataChart(l,".earnings-chart__hourly",c);var u=i();dataChart(u,".essentials-chart__house-price",c);var d=n();dataChart(d,".essentials-chart__flat-price",c);var p=s();dataChart(p,".essentials-chart__flat-rent",c);var f=a();dataChart(f,".essentials-chart__house-rent",c);var g=r();dataChart(g,".groceries-chart",c);var m=o("beer");dataChart(m,".nightout-chart__beer",c);var h=o("cinemaTicket");dataChart(h,".nightout-chart__cinema",c);var y=o("coffee");dataChart(y,".nightout-chart__coffee",c);var v=o("mealForTwo");dataChart(v,".nightout-chart__meal",c);var b=o("softDrinks");dataChart(b,".nightout-chart__softdrink",c);var w=o("taxi",c);dataChart(w,".nightout-chart__taxi",c);var N=o("wine");dataChart(N,".nightout-chart__wine",c),$.each(e,function(t,n){function i(){var e=n.monthlyEarnings.replace(/\,/g,""),t=12*parseInt(e,10);return(t+"").replace(/(\d)(?=(\d{3})+$)/g,"$1,")}function a(){var e=n.monthlyEarnings.replace(/\,/g,""),t=parseInt(e,10),i=12*t/2080;return Math.round(i)}var s=$(".app-content #earnings"),r=$(".app-content #essentials"),o=$(".app-content #groceries"),c=$(".app-content #nightout");s.find(".card--first .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+i()+"</p></article>"),s.find(".card--second .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.monthlyEarnings+"</p></article>"),s.find(".card--third .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+a()+"</p></article>"),r.find(".card--first .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.living.housePrice+"</p></article>"),r.find(".card--second .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.living.flatPrice+"</p></article>"),r.find(".card--third .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.living.houseRent+"</p></article>"),r.find(".card--fourth .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.living.flatRent+"</p></article>"),o.find(".card--first .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.food.totalFoodCost+"</p></article>"),o.find(".card--second .results--table__nav").append('<a href="#" data-tab="'+n.cityName.replace(/\s/g,"")+'">'+n.cityName+"</a>");var l="";$.each(n.food,function(e,t){l+="<li>",l+="<span>"+e+"</span>",l+="<span>£"+t+"</span>",l+="</li>"}),l+="",o.find(".card--second .results--table__table").append('<ul id="'+n.cityName.replace(/\s/g,"")+'">'+l+"</ul>"),c.find(".card--first .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.dateNight.beer+"</p></article>"),c.find(".card--second .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.dateNight.cinemaTicket+"</p></article>"),c.find(".card--third .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.dateNight.coffee+"</p></article>"),c.find(".card--fourth .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.dateNight.mealForTwo+"</p></article>"),c.find(".card--fifth .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.dateNight.softDrinks+"</p></article>"),c.find(".card--sixth .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.dateNight.taxi+"</p></article>"),c.find(".card--seventh .results--numbers").append('<article><span class="city-name">'+n.cityName+'</span><p class="result-figure">£'+n.dateNight.wine+"</p></article>");var u="https://twitter.com/home?status=I%20compared%20the%20cost%20of%20living%20in%20"+e[0].cityName+"%20,"+e[1].cityName+"%20and%20"+e[2].cityName+",%20So%20can%20you!%20http%3A//www.web-blinds.com/lorem-ipsum-dolor-sit-amet";$("#twitter-share").attr("href",u)}),$(document).ajaxSuccess(function(){$("#groceries .results--table__nav a:first").addClass("is-active"),$("#groceries .results--table__table ul:first").addClass("is-active"),$("#groceries .results--table__nav a").on("click touch",function(e){e.preventDefault();var t=$(this).attr("data-tab").replace(/\s/g,"");$("#groceries .results--table__nav").find(".is-active").removeClass("is-active"),$("#groceries .results--table__table").find(".is-active").removeClass("is-active"),$(this).addClass("is-active"),$("#groceries .results--table__table").find("#"+t).addClass("is-active")})});var C="http://www.smclogistics.co.uk/proptest/citylist.php";$.getJSON(C).then(function(e){$(e[2].list).each(function(e,t){$(".compare-again").find("select").append("<option>"+t+"</option>")})}),$("#compare-again-btn").on("click touch",function(e){var t=[];$(".compare-again select > option:selected").each(function(e){output=$(this).text().replace(/\s/g,"%20"),t[e]=output});var n="http://www.smclogistics.co.uk/proptest/getdata.php?city1="+t[0]+"&city2="+t[1]+"&city3="+t[2];resultApi(n)})})}!function(){"use strict";function e(n){return"undefined"==typeof this||Object.getPrototypeOf(this)!==e.prototype?new e(n):(_=this,_.version="3.3.4",_.tools=new C,_.isSupported()?(_.tools.extend(_.defaults,n||{}),_.defaults.container=t(_.defaults),_.store={elements:{},containers:[]},_.sequences={},_.history=[],_.uid=0,_.initialized=!1):"undefined"!=typeof console&&null!==console&&console.log("ScrollReveal is not supported in this browser."),_)}function t(e){if(e&&e.container){if("string"==typeof e.container)return window.document.documentElement.querySelector(e.container);if(_.tools.isNode(e.container))return e.container;console.log('ScrollReveal: invalid container "'+e.container+'" provided.'),console.log("ScrollReveal: falling back to default container.")}return _.defaults.container}function n(e,t){return"string"==typeof e?Array.prototype.slice.call(t.querySelectorAll(e)):_.tools.isNode(e)?[e]:_.tools.isNodeList(e)?Array.prototype.slice.call(e):[]}function i(){return++_.uid}function a(e,t,n){t.container&&(t.container=n),e.config?e.config=_.tools.extendClone(e.config,t):e.config=_.tools.extendClone(_.defaults,t),"top"===e.config.origin||"bottom"===e.config.origin?e.config.axis="Y":e.config.axis="X"}function s(e){var t=window.getComputedStyle(e.domEl);e.styles||(e.styles={transition:{},transform:{},computed:{}},e.styles.inline=e.domEl.getAttribute("style")||"",e.styles.inline+="; visibility: visible; ",e.styles.computed.opacity=t.opacity,t.transition&&"all 0s ease 0s"!==t.transition?e.styles.computed.transition=t.transition+", ":e.styles.computed.transition=""),e.styles.transition.instant=r(e,0),e.styles.transition.delayed=r(e,e.config.delay),e.styles.transform.initial=" -webkit-transform:",e.styles.transform.target=" -webkit-transform:",o(e),e.styles.transform.initial+="transform:",e.styles.transform.target+="transform:",o(e)}function r(e,t){var n=e.config;return"-webkit-transition: "+e.styles.computed.transition+"-webkit-transform "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s, opacity "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s; transition: "+e.styles.computed.transition+"transform "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s, opacity "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s; "}function o(e){var t,n=e.config,i=e.styles.transform;t="top"===n.origin||"left"===n.origin?/^-/.test(n.distance)?n.distance.substr(1):"-"+n.distance:n.distance,parseInt(n.distance)&&(i.initial+=" translate"+n.axis+"("+t+")",i.target+=" translate"+n.axis+"(0)"),n.scale&&(i.initial+=" scale("+n.scale+")",i.target+=" scale(1)"),n.rotate.x&&(i.initial+=" rotateX("+n.rotate.x+"deg)",i.target+=" rotateX(0)"),n.rotate.y&&(i.initial+=" rotateY("+n.rotate.y+"deg)",i.target+=" rotateY(0)"),n.rotate.z&&(i.initial+=" rotateZ("+n.rotate.z+"deg)",i.target+=" rotateZ(0)"),i.initial+="; opacity: "+n.opacity+";",i.target+="; opacity: "+e.styles.computed.opacity+";"}function c(e){var t=e.config.container;t&&_.store.containers.indexOf(t)===-1&&_.store.containers.push(e.config.container),_.store.elements[e.id]=e}function l(e,t,n){var i={target:e,config:t,interval:n};_.history.push(i)}function u(){if(_.isSupported()){f();for(var e=0;e<_.store.containers.length;e++)_.store.containers[e].addEventListener("scroll",d),_.store.containers[e].addEventListener("resize",d);_.initialized||(window.addEventListener("scroll",d),window.addEventListener("resize",d),_.initialized=!0)}return _}function d(){x(f)}function p(){var e,t,n,i;_.tools.forOwn(_.sequences,function(a){i=_.sequences[a],e=!1;for(var s=0;s<i.elemIds.length;s++)n=i.elemIds[s],t=_.store.elements[n],N(t)&&!e&&(e=!0);i.active=e})}function f(){var e,t;p(),_.tools.forOwn(_.store.elements,function(n){t=_.store.elements[n],e=y(t),h(t)?(t.config.beforeReveal(t.domEl),e?t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.target+t.styles.transition.delayed):t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.target+t.styles.transition.instant),m("reveal",t,e),t.revealing=!0,t.seen=!0,t.sequence&&g(t,e)):v(t)&&(t.config.beforeReset(t.domEl),t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.initial+t.styles.transition.instant),m("reset",t),t.revealing=!1)})}function g(e,t){var n=0,i=0,a=_.sequences[e.sequence.id];a.blocked=!0,t&&"onload"===e.config.useDelay&&(i=e.config.delay),e.sequence.timer&&(n=Math.abs(e.sequence.timer.started-new Date),window.clearTimeout(e.sequence.timer)),e.sequence.timer={started:new Date},e.sequence.timer.clock=window.setTimeout(function(){a.blocked=!1,e.sequence.timer=null,d()},Math.abs(a.interval)+i-n)}function m(e,t,n){var i=0,a=0,s="after";switch(e){case"reveal":a=t.config.duration,n&&(a+=t.config.delay),s+="Reveal";break;case"reset":a=t.config.duration,s+="Reset"}t.timer&&(i=Math.abs(t.timer.started-new Date),window.clearTimeout(t.timer.clock)),t.timer={started:new Date},t.timer.clock=window.setTimeout(function(){t.config[s](t.domEl),t.timer=null},a-i)}function h(e){if(e.sequence){var t=_.sequences[e.sequence.id];return t.active&&!t.blocked&&!e.revealing&&!e.disabled}return N(e)&&!e.revealing&&!e.disabled}function y(e){var t=e.config.useDelay;return"always"===t||"onload"===t&&!_.initialized||"once"===t&&!e.seen}function v(e){if(e.sequence){var t=_.sequences[e.sequence.id];return!t.active&&e.config.reset&&e.revealing&&!e.disabled}return!N(e)&&e.config.reset&&e.revealing&&!e.disabled}function b(e){return{width:e.clientWidth,height:e.clientHeight}}function w(e){if(e&&e!==window.document.documentElement){var t=$(e);return{x:e.scrollLeft+t.left,y:e.scrollTop+t.top}}return{x:window.pageXOffset,y:window.pageYOffset}}function $(e){var t=0,n=0,i=e.offsetHeight,a=e.offsetWidth;do isNaN(e.offsetTop)||(t+=e.offsetTop),isNaN(e.offsetLeft)||(n+=e.offsetLeft),e=e.offsetParent;while(e);return{top:t,left:n,height:i,width:a}}function N(e){function t(){var t=l+o*r,n=u+c*r,i=d-o*r,f=p-c*r,g=s.y+e.config.viewOffset.top,m=s.x+e.config.viewOffset.left,h=s.y-e.config.viewOffset.bottom+a.height,y=s.x-e.config.viewOffset.right+a.width;return t<h&&i>g&&n>m&&f<y}function n(){return"fixed"===window.getComputedStyle(e.domEl).position}var i=$(e.domEl),a=b(e.config.container),s=w(e.config.container),r=e.config.viewFactor,o=i.height,c=i.width,l=i.top,u=i.left,d=l+o,p=u+c;return t()||n()}function C(){}var _,x;e.prototype.defaults={origin:"bottom",distance:"20px",duration:500,delay:0,rotate:{x:0,y:0,z:0},opacity:0,scale:.9,easing:"cubic-bezier(0.6, 0.2, 0.1, 1)",container:window.document.documentElement,mobile:!0,reset:!1,useDelay:"always",viewFactor:.2,viewOffset:{top:0,right:0,bottom:0,left:0},beforeReveal:function(e){},beforeReset:function(e){},afterReveal:function(e){},afterReset:function(e){}},e.prototype.isSupported=function(){var e=document.documentElement.style;return"WebkitTransition"in e&&"WebkitTransform"in e||"transition"in e&&"transform"in e},e.prototype.reveal=function(e,r,o,d){var p,f,g,m,h,y;if(void 0!==r&&"number"==typeof r?(o=r,r={}):void 0!==r&&null!==r||(r={}),p=t(r),f=n(e,p),!f.length)return console.log('ScrollReveal: reveal on "'+e+'" failed, no elements found.'),_;o&&"number"==typeof o&&(y=i(),h=_.sequences[y]={id:y,interval:o,elemIds:[],active:!1});for(var v=0;v<f.length;v++)m=f[v].getAttribute("data-sr-id"),m?g=_.store.elements[m]:(g={id:i(),domEl:f[v],seen:!1,revealing:!1},g.domEl.setAttribute("data-sr-id",g.id)),h&&(g.sequence={id:h.id,index:h.elemIds.length},h.elemIds.push(g.id)),a(g,r,p),s(g),c(g),_.tools.isMobile()&&!g.config.mobile||!_.isSupported()?(g.domEl.setAttribute("style",g.styles.inline),g.disabled=!0):g.revealing||g.domEl.setAttribute("style",g.styles.inline+g.styles.transform.initial);return!d&&_.isSupported()&&(l(e,r,o),_.initTimeout&&window.clearTimeout(_.initTimeout),_.initTimeout=window.setTimeout(u,0)),_},e.prototype.sync=function(){if(_.history.length&&_.isSupported()){for(var e=0;e<_.history.length;e++){var t=_.history[e];_.reveal(t.target,t.config,t.interval,!0)}u()}else console.log("ScrollReveal: sync failed, no reveals found.");return _},C.prototype.isObject=function(e){return null!==e&&"object"==typeof e&&e.constructor===Object},C.prototype.isNode=function(e){return"object"==typeof window.Node?e instanceof window.Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},C.prototype.isNodeList=function(e){var t=Object.prototype.toString.call(e),n=/^\[object (HTMLCollection|NodeList|Object)\]$/;return"object"==typeof window.NodeList?e instanceof window.NodeList:e&&"object"==typeof e&&n.test(t)&&"number"==typeof e.length&&(0===e.length||this.isNode(e[0]))},C.prototype.forOwn=function(e,t){if(!this.isObject(e))throw new TypeError('Expected "object", but received "'+typeof e+'".');for(var n in e)e.hasOwnProperty(n)&&t(n)},C.prototype.extend=function(e,t){return this.forOwn(t,function(n){this.isObject(t[n])?(e[n]&&this.isObject(e[n])||(e[n]={}),this.extend(e[n],t[n])):e[n]=t[n]}.bind(this)),e},C.prototype.extendClone=function(e,t){return this.extend(this.extend({},e),t)},C.prototype.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},x=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:window.ScrollReveal=e}(),$(function(){$("#menu-toggle").on("click touch",function(e){e.preventDefault(),$(this).toggleClass("is-active"),$(".header--input-group").toggleClass("is-active"),$(this).hasClass("is-active")?$(this).find(".fa").removeClass("fa-bars").addClass("fa-close"):$(this).find(".fa").removeClass("fa-close").addClass("fa-bars")});var e="http://www.smclogistics.co.uk/proptest/citylist.php";$.getJSON(e).then(function(e){console.log(e),$(e[2].list).each(function(e,t){$(".input-group select").append("<option>"+t+"</option>")})}),$("#compare-btn").on("click",function(e){$(".app-content").load("templates/results.html"),$(".landing-page").addClass("is-ajaxed"),$("header").removeClass("is-hidden");var t=[];$("#landing-inputs select > option:selected").each(function(e){output=$(this).text().replace(/\s/g,"%20"),t[e]=output});var n="http://www.smclogistics.co.uk/proptest/getdata.php?city1="+t[0]+"&city2="+t[1]+"&city3="+t[2];return resultApi(n),$(".header--input-group select").each(function(e){console.log(t[e]);var n=t[e].replace(/\%20/g," ");$(this).find("option:selected").text(n)}),$(".header--input-group select").on("change",function(e){var t=[];$(".header--input-group select > option:selected").each(function(e){newOutput=$(this).text().replace(/\s/g,"%20"),t[e]=newOutput});var n="http://www.smclogistics.co.uk/proptest/getdata.php?city1="+t[0]+"&city2="+t[1]+"&city3="+t[2];resultApi(n)}),!1}),$(".input-group select").on("ready change",function(e){$(this).parents("div").find("option:selected").hasClass("first")?$("#compare-btn").addClass("disabled"):$("#compare-btn").removeClass("disabled")})}),$(function(){$(".link--next",".link--prev").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html, body").animate({scrollTop:e.offset().top},1e3),!1}})});